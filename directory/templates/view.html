{% extends 'base.html' %}
{% load staticfiles %}
{% block title %}{{ file_name }}{% endblock %}
{% block scripts %}
<script src="{% static 'js/browser.min.js' %}"></script>
<script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
<script src="{% static 'CryptoJS/rollups/aes.js' %}"></script>
<script src="{% static 'CryptoJS/rollups/tripledes.js' %}"></script>
<script src="{% static 'CryptoJS/components/mode-ctr.js' %}"></script>
<script src="{% static 'CryptoJS/components/mode-ecb.js' %}"></script>
<script src="{% static 'CryptoJS/components/pad-nopadding.js' %}"></script>

<script type="text/javascript">

    // Call this code when the page is done loading.
    $(function() {

        // Run a quick encryption/decryption when they click.
        $('#testme').click(function() {

            // Encrypt with the public key...
            var encrypt = new JSEncrypt();
            encrypt.setPublicKey($('#pubkey').val());
            var encrypted = encrypt.encrypt($('#input').val());
            console.log(encrypted);
            console.log(typeof encrypted);
            // Decrypt with the private key...
            var decrypt = new JSEncrypt();
            decrypt.setPrivateKey($('#privkey').val());
            var uncrypted = decrypt.decrypt(encrypted);

            // Now a simple check to see if the round-trip worked.
            if (uncrypted == $('#input').val()) {
                alert('It works!!!');
            }
            else {
                alert('Something went wrong....');
            }
        });
    });
</script>
<!--<script src="{% static 'jsencrypt/bin/jsencrypt.js' %}"></script>-->
<script src="{% static 'CryptoJS/rollups/rc4.js' %}"></script>
<script src="{% static 'js/test.js' %}" type="text/javascript"></script>

{% endblock %}

{% block content %}


<!--<label for="privkey">Private Key</label><br/>-->
<!--<textarea id="privkey" rows="15" cols="65">-&#45;&#45;&#45;&#45;BEGIN RSA PRIVATE KEY-&#45;&#45;&#45;&#45;-->
<!--MIICXQIBAAKBgQDlOJu6TyygqxfWT7eLtGDwajtNFOb9I5XRb6khyfD1Yt3YiCgQ-->
<!--WMNW649887VGJiGr/L5i2osbl8C9+WJTeucF+S76xFxdU6jE0NQ+Z+zEdhUTooNR-->
<!--aY5nZiu5PgDB0ED/ZKBUSLKL7eibMxZtMlUDHjm4gwQco1KRMDSmXSMkDwIDAQAB-->
<!--AoGAfY9LpnuWK5Bs50UVep5c93SJdUi82u7yMx4iHFMc/Z2hfenfYEzu+57fI4fv-->
<!--xTQ//5DbzRR/XKb8ulNv6+CHyPF31xk7YOBfkGI8qjLoq06V+FyBfDSwL8KbLyeH-->
<!--m7KUZnLNQbk8yGLzB3iYKkRHlmUanQGaNMIJziWOkN+N9dECQQD0ONYRNZeuM8zd-->
<!--8XJTSdcIX4a3gy3GGCJxOzv16XHxD03GW6UNLmfPwenKu+cdrQeaqEixrCejXdAF-->
<!--z/7+BSMpAkEA8EaSOeP5Xr3ZrbiKzi6TGMwHMvC7HdJxaBJbVRfApFrE0/mPwmP5-->
<!--rN7QwjrMY+0+AbXcm8mRQyQ1+IGEembsdwJBAN6az8Rv7QnD/YBvi52POIlRSSIM-->
<!--V7SwWvSK4WSMnGb1ZBbhgdg57DXaspcwHsFV7hByQ5BvMtIduHcT14ECfcECQATe-->
<!--aTgjFnqE/lQ22Rk0eGaYO80cc643BXVGafNfd9fcvwBMnk0iGX0XRsOozVt5Azil-->
<!--psLBYuApa66NcVHJpCECQQDTjI2AQhFc1yRnCU/YgDnSpJVm1nASoRUnU8Jfm3Oz-->
<!--uku7JUXcVpt08DFSceCEX9unCuMcT72rAQlLpdZir876-->
<!-- -&#45;&#45;&#45;&#45;END RSA PRIVATE KEY-&#45;&#45;&#45;&#45;</textarea><br/>-->
<!--<label for="pubkey">Public Key</label><br/>-->
<!--<textarea id="pubkey" rows="15" cols="65">-&#45;&#45;&#45;&#45;BEGIN PUBLIC KEY-&#45;&#45;&#45;&#45;-->
<!--MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDlOJu6TyygqxfWT7eLtGDwajtN-->
<!--FOb9I5XRb6khyfD1Yt3YiCgQWMNW649887VGJiGr/L5i2osbl8C9+WJTeucF+S76-->
<!--xFxdU6jE0NQ+Z+zEdhUTooNRaY5nZiu5PgDB0ED/ZKBUSLKL7eibMxZtMlUDHjm4-->
<!--gwQco1KRMDSmXSMkDwIDAQAB-->
<!-- -&#45;&#45;&#45;&#45;END PUBLIC KEY-&#45;&#45;&#45;&#45;</textarea><br/>-->
<!--<label for="input">Text to encrypt:</label><br/>-->
<!--<textarea id="input" name="input" type="text" rows=4 cols=70>This is a test!</textarea><br/>-->
<!--<input id="testme" type="button" value="Test Me!!!" /><br/>-->


    <div id="error"></div>
    <div id="lol">
    <h1>AES decrypt using CryptoJS</h1>
    <br>key (64 hexadecimal characters)<input id='key' type='text' value="7bb28bff562de31d99cc67c82f5260000326ec846faf40e84310382873f83d34"/>
    <br>IV (32 hexadecimal characters)<input id='iv' type='text' value="724fa334bae5a617d6efa81b6277601f"/>
    <br><button id="decrypt_button" onclick="decrypt(`{{ file_str }}`, '{{ file_name }}')" >decrypt</button>
    </div>

    <div id="text_file"></div>
{% endblock %}